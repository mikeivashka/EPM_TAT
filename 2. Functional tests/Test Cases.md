# Functional tests
##	for https://www.decluttr.com/ website




### [decluttr-1] Проверка отправки фидбека на главной(Specific)
#### Priority: low
#### Tag: shop
#### Environment: desktop
№ | Step | Expectation
--|------|-------------
**Precondition** | Перейти на https://www.decluttr.com/us/store
1 | Нажать на желтую кнопку Feedback справа| Отображается попап с двумя кнопками: "Specific feedback" и "Generic Feedback"
2 | Выбрать "Specific feedback" | Отображается попап с текстом "Click on the part of the page you would like to give feedback about". При потере ховера попап скрывается.
3 | Наводить курсор на элементы страницы | При наведении на элемент он обводится желтой рамкой. Не происходит подвисаний и артефактов.
4 | Нажать на любой элемент страницы | Появляется попап с выбором реакции (5 смайликов)
5 | Выбрать любой смайлик | Появляется селектор с выбором причины
6 | Выбрать любую причину | Появляется поле для ввода комментария и кнопка "Submit"
7 | Нажать кнопку "Submit" | Отображается предупреждение о необходимости заполения комментария
8 | Открыть DevTools браузера на вкладке Network | -
9 | Заполнить комментарий любым текстом и отправить форму | Форма успешно отправлена. Отображается попап "We got your feedback". Среди запросов есть запрос к "api.usabilla.com", содержащий поле "comment" с комментарием, введенным в этом шаге

****

### [decluttr-2] Проверка контролов карусели на главной
#### Priority: normal
#### Tag: shop
#### Environment: desktop
№ | Step | Expectation
--|------|-------------
**Precondition** | Перейти на https://www.decluttr.com/us/store
1 | Проверить отображение каруселей на главной | На странице присутствуют две карусели: Most Popular и персонализированная (для новых пользователей называется Most Viewed)
2 | Нажать на стрелку вправо несколько раз | Карусель скроллится примерно на 3-3.5 карточки товара за нажатие. Карусель зациклена, то есть товары повторяются и у карусели нет конца
3 | Нажать на стрелку влево несколько раз | Карусель скроллится примерно на 3-3.5 карточки товара за нажатие. Карусель зациклена, то есть товары повторяются и у карусели нет конца

****

### [decluttr-3] Сортировка товаров на странице категории
#### Priority: normal
#### Tag: shop
#### Environment: desktop
№ | Step | Expectation
--|------|-------------
**Precondition** | Открыта страница любой категории товаров (например https://www.decluttr.com/us/store/category/ipads-and-tablets/)
1 | Проверить режим сортировки по умолчанию | Sort by в положении "Popularity" 
2 | Развернуть доступные режимы нажатием на кнопку "Pupularity" | Отображаются режимы "Popularity", "Alphabetical: A-Z", "Alphabetical: Z-A", "Price: Low to High", "Price: High to Low". Выбранный режим подсвечен серым цветом
3 | Выбрать режим Alphabetical: A-Z | Товары отсортированы по названию по алфавиту от A до Z
4 | Выбрать режим Alphabetical: Z-A | Товары отсортированы по названию по алфавиту от Z до A
5 | Выбрать режим Price: Low to High | Товары отсортированы по цене от дешевых к дорогим
6 | Выбрать режим Price: High to Low | Товары отсортированы по цене от дорогих к дешевым
7 | Повторить шаги 3-6 с любыми включенными фильтрами из блока Filters | Сортировка работает корректно, результат аналогичный

****

### [decluttr-4] Пополнение корзины и переход к оплате незалогином
#### Priority: blocker
#### Tag: shop
#### Environment: desktop
№ | Step | Expectation
--|------|-------------
**Precondition** | Корзина пустая. Пользователь не залогинен. Находимся на странице товара
1 | Добавить товар в корзину кнопкой "Add to cart" | Открылся попап "Added to cart" с кнопками Continue shopping и Checkout now. Cart total соответствует стоимости выбранного товара
2 | Нажать на кнопку "Continue shopping" | Попап скрылся, остались на странице товара. В блоке Cart в правом верхнем углу отображается цена выбранного товара и количество (1)
3 | Перейти на страницу другого товара любым способом и добавить его в корзину | Открылся попап "Added to cart" с кнопками Continue shopping и Checkout now. Cart total соответствует суммарной стоимости всех товаров в корзине
4 | Нажать кнопку "Checkout now" | Открылась страница корзины. Выбранные товары присутствуют в списке
5 | Перейти к оплате кнопкой Checkout Securely | Произошел переход на страницу авторизации (https://www.decluttr.com/login)

***

### [decluttr-5] Управление товарами в корзине
#### Priority: critical
#### Tag: shop
#### Environment: desktop
№ | Step | Expectation
--|------|-------------
**Precondition** | В корзине 3 или более различных товара
1 | Перейти к корзине по нажатию кнопки Cart в правом верхнем углу | Переход на страницу корзины. Выбранные ранее товары присутствуют в корзине, суммарная стоимость соответствует значению с кнопки "Cart"
2 | Увеличить количество любого из товаров стрелочкой "Вверх" в поле Qty | По нажатию на срелку количество увеличевается на 1, страница обновляется и отображается новая сумма товаров в корзине
3 | Уменьшить количество любого из товаров стрелочкой "Вниз "в поле Qty| По нажатию на срелку количество уменьшается на 1, страница обновляется и отображается новая сумма товаров в корзине
4 | Уменьшить количество любого из товаров до нуля | Страница обновилась. Товар пропал из списка. Обновилось количество и суммарная стоимость товаров в корзине
5 | Повторить шаги 2-4 изменяя количество товара вручную, вводя число в поле Qty | Результат аналогичный
6 | Попробовать ввести отрицательное число или 0  в поле Qty | Товар пропадает из списка. Обновилось количество и суммарная стоимость товаров в корзине
7 | Удалить товар кнопкой "Remove" | Товар пропадает из списка. Обновилось количество и суммарная стоимость товаров в корзине
8 | Поочередно удалить все товары из корзины | Отображается текст "Your cart is empty" и кнопка "Continue shopping"
9 | Нажать на кнопку "Continue shopping" | Произошел переход к странице всех товаров

***

### [decluttr-6] Предупреждение о малом количестве товара на складе
#### Priority: normal 
#### Tag: shop
#### Environment: desktop
№ | Step | Expectation
--|------|-------------
**Precondition** | В корзине находится товар, которого менее 5 штук в наличии (Например https://www.decluttr.com/us/store/products/sony-ps3-slim-160-gb-black-0b1ffbeb-e879-46dd-a7f8-078477764f1f)
1 | Перейти к корзине по нажатию кнопки Cart в правом верхнем углу | Переход на страницу корзины. Выбранные ранее товары присутствуют в корзине, суммарная стоимость соответствует значению с кнопки "Cart"
2 | Проверить карточку товара | В карточке отображается алерт: "HURRY! ONLY N IN STOCK" красного цвета
3 | Увеличить количество товара до N стрелочками или вручную | Количество увеличилось, сумма заказа изменилось в соответствие с количеством
4 | Попробовать увеличить количество товара до N+1 и более | Страница обновилась. Количество товара сохранило значение N. Над карточкой товара предупреждение: "Line items quantity - Sorry, we only have N of that product available! We’ve updated your basket accordingly."
5 | Нажать на кнопку Checkout securely | Если были залогинены - переход к оплате заказа, если нет - переходим на страницу авторизации

***

### [decluttr-7] Проброс товаров при авторизации из корзины
#### Priority: critical
#### Tag: shop
#### Environment: desktop
№ | Step | Expectation
--|------|-------------
**Precondition** | Не залогинены на сайте, в корзине есть 1 или несколько товаров
1 | Перейти к корзине по нажатию кнопки Cart в правом верхнем углу | Переход на страницу корзины. Выбранные ранее товары присутствуют в корзине, суммарная стоимость соответствует значению с кнопки "Cart"
2 | Перейти к оплате кнопкой "Checkout Securely" | Произошел переход на страницу авторизации (https://www.decluttr.com/login)
3 | Ввести существующие email и пароль | Успешно авторизовались. Произошел переход на страницу подтверждения адреса (https://www.decluttr.com/us/store/checkout/address). Сумма к оплате соответствует значению, которое видели в корзине. 
4 | Развернуть список товаров нажатием кнопки "Order summary" | Развернулся список с товарами, выбранными ранее.

***

### [decluttr-8] Проброс корзины при авторизации
#### Priority: critical
#### Tag: shop
#### Environment: desktop
№ | Step | Expectation
--|------|-------------
**Precondition** | Не залогинены на сайте, в корзине есть 1 или несколько товаров
1 | Перейти к авторизации по нажатию кнопки login в правом верхнем углу | Произошел переход на страницу авторизации (https://www.decluttr.com/store/login)
2 | Ввести существующие email и пароль | Успешно авторизовались. Вернулись на страницу, с которой переходили к авторизации
3 | Перейти к корзине по нажатию кнопки Cart в правом верхнем углу | В корзине все товары, добавленные пользователем ранее, а также в конце списка добавились товары, которые попали в корзину под незалогином

***

### [decluttr-9] Переход к продаже собственного девайса (саджест)
#### Priority: critical
#### Tag: sell
#### Environment: desktop
№ | Step | Expectation
--|------|-------------
**Precondition** | Не залогинены на сайте, находимся на главной https://www.decluttr.com/
1 | Перейти к выбору девайса для продажи по нажатию "Start selling" | Произошел переход на страницу выбора девайса (https://www.decluttr.com/start-selling/). На странице есть строка поиска c плейсхолдером "Enter your item"
2 | Начать вводить название любого девайса так, чтобы отобразился саджест (iPhone, iPad и пр.) | Под поисковой строкой отобразился саджест, соответствующий запросу. Саджест можно скролить
3 | Кликнуть по товару из саджеста | Переход к странице продажи товара. Девайс соответствует выбранному в саджесте
4 | Нажать "Sell this device" | Переход к корзине продажи. Сумма в корзине соответствует стоимости, указанной на странице товара
5 | Нажать "Continue to checkout" | Переход к странице выбора платежной системы. В поле "You are going to make" сумма, соответствующая указанной в корзине

***

### [decluttr-10] Фильтрация каталога по цене
#### Priority: normal
#### Tag: shop
#### Environment: desktop
№ | Step | Expectation
--|------|-------------
**Precondition** | Находимся на странице категории, например https://www.decluttr.com/us/store/category/cell-phones/apple/
1 | Проверить наличие фильтрации по цене | В блоке "Filter by" присутствует поле Price и два инпута для ввода минимального и максимального значений
2 | Указать любое число в поле максимальной цены | В выдаче отсутствуют товары, цена которых выше указанной 
3 | Указать любое число в поле минимальной цены | В выдаче отсутствуют товары, цена которых ниже указанной 
4 | Указать минимальную цену выше максимальной | Поле максимальная цена очищено, выдача обновилась
5 | Установить допустимые цены так, чтобы выдача оказалась пустой | Вместо выдачи сообщения "No matching products found" и кнопка "Go back"
6 | Нажать на кнопку "Go back" | Возврат к предыдущей выдаче, поля минимальная и максимальная цена заполнены значениями из предыдущего запроса

***

